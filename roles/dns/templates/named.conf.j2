# roles/dns/templates/named.conf.j2

options {
    listen-on port 53 { 127.0.0.1; {{ dns_ip_address }}; };
    listen-on-v6 port 53 { none; };
    directory       "/var/named";
    allow-query     { localhost; {{ dns_network_range }}; };
    recursion yes;
    dnssec-validation yes;
    managed-keys-directory "/var/named/dynamic";
};

logging {
    channel default_debug {
        file "data/named.run";
        severity dynamic;
    };
};

# Root DNS Zone
zone "." IN {
    type hint;
    file "named.ca";
};

# Forward zone for domain1.com
zone "{{ domain1_forward_zone }}" IN {
    type master;
    file "db.{{ domain1_forward_zone }}";
};

# Forward zone for domain2.com
zone "{{ domain2_forward_zone }}" IN {
    type master;
    file "db.{{ domain2_forward_zone }}";
};

# Forward zone for domain3.com
zone "{{ domain3_forward_zone }}" IN {
    type master;
    file "db.{{ domain3_forward_zone }}";
};

# Forward zone for domain4.com
zone "{{ domain4_forward_zone }}" IN {
    type master;
    file "db.{{ domain4_forward_zone }}";
};

# Reverse zone
zone "{{ dns_reverse_zone }}" IN {
    type master;
    file "db.{{ dns_reverse_zone }}";
};

include "/etc/named.root.key";
